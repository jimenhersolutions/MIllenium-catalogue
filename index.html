import React, { useState, useEffect, useRef } from 'react';
import { Menu, X, Instagram, Twitter, Facebook, Search, Home } from 'lucide-react';

// --- Datos de Productos ---
const productsData = {
    women: {
        tops: [
            { id: 101, price: "price x", image: "https://i.imgur.com/Eulgm5p.png" },
            { id: 102, price: "price x", image: "https://i.imgur.com/xx0sIz0.png" },
            { id: 103, price: "price x", image: "https://i.imgur.com/svdC146.png" },
            { id: 104, price: "price x", image: "https://i.imgur.com/FvKtYbz.png" },
            { id: 105, price: "price x", image: "https://i.imgur.com/vwyPgrO.png" },
            { id: 106, price: "price x", image: "https://i.imgur.com/dG6qG5J.png" },
            { id: 107, price: "price x", image: "https://i.imgur.com/m1y1vqC.png" },
            { id: 108, price: "price x", image: "https://i.imgur.com/HSybO8Z.png" },
            { id: 109, price: "price x", image: "https://i.imgur.com/Fmqgzci.png" },
            { id: 110, price: "price x", image: "https://i.imgur.com/s3JPYxd.png" },
            { id: 111, price: "price x", image: "https://i.imgur.com/Ef8Q61z.png" },
            { id: 112, price: "price x", image: "https://i.imgur.com/w4MgOjr.png" },
            { id: 113, price: "price x", image: "https://i.imgur.com/WQsVCPi.png" },
            { id: 114, price: "price x", image: "https://i.imgur.com/oYvvLrs.png" },
            { id: 115, price: "price x", image: "https://i.imgur.com/HwDvMvO.png" },
            { id: 116, price: "price x", image: "https://i.imgur.com/dzqiq4S.png" },
            { id: 117, price: "price x", image: "https://i.imgur.com/Hkx1oR4.png" }
        ],
        bottoms: [
            { id: 201, price: "price x", image: "https://i.imgur.com/viAnZzE.jpeg" },
            { id: 202, price: "price x", image: "https://i.imgur.com/3PMuNWD.jpeg" },
            { id: 203, price: "price x", image: "https://i.imgur.com/l03pAEs.jpeg" },
            { id: 204, price: "price x", image: "https://i.imgur.com/RHu8utQ.jpeg" },
            { id: 205, price: "price x", image: "https://i.imgur.com/yeqa8kY.jpeg" },
            { id: 206, price: "price x", image: "https://i.imgur.com/qXtzpTw.jpeg" },
            { id: 207, price: "price x", image: "https://i.imgur.com/TO66HxX.jpeg" },
            { id: 208, price: "price x", image: "https://i.imgur.com/souAehx.jpeg" },
            { id: 209, price: "price x", image: "https://i.imgur.com/L6XI6N7.jpeg" },
            { id: 210, price: "price x", image: "https://i.imgur.com/4H9cTf9.jpeg" },
            { id: 211, price: "price x", image: "https://i.imgur.com/cIN97U3.jpeg" },
            { id: 212, price: "price x", image: "https://i.imgur.com/15nJr2R.jpeg" },
            { id: 213, price: "price x", image: "https://i.imgur.com/KAVYvmi.jpeg" },
            { id: 214, price: "price x", image: "https://i.imgur.com/hjptdFU.jpeg" },
            { id: 215, price: "price x", image: "https://i.imgur.com/9p1LIe6.jpeg" },
            { id: 216, price: "price x", image: "https://i.imgur.com/k2V5Te8.jpeg" },
            { id: 217, price: "price x", image: "https://i.imgur.com/xDiKC5M.jpeg" },
            { id: 218, price: "price x", image: "https://i.imgur.com/MaqDTjX.jpeg" },
            { id: 219, price: "price x", image: "https://i.imgur.com/yXAX7Rw.jpeg" },
            { id: 220, price: "price x", image: "https://i.imgur.com/Ndt0pOU.jpeg" }
        ],
        dresses: [
            { id: 301, price: "price x", image: "https://i.imgur.com/RYFB3Uh.jpeg" },
            { id: 302, price: "price x", image: "https://i.imgur.com/1Hfj4rB.jpeg" },
            { id: 303, price: "price x", image: "https://i.imgur.com/pe35Ogw.jpeg" },
            { id: 304, price: "price x", image: "https://i.imgur.com/Vup7vFO.jpeg" },
            { id: 305, price: "price x", image: "https://i.imgur.com/ozIjLHp.jpeg" },
            { id: 306, price: "price x", image: "https://i.imgur.com/PM2dLSR.jpeg" },
            { id: 307, price: "price x", image: "https://i.imgur.com/akk2ppW.jpeg" },
            { id: 308, price: "price x", image: "https://i.imgur.com/nDGaNMd.jpeg" },
            { id: 309, price: "price x", image: "https://i.imgur.com/dsoKQyI.jpeg" }
        ],
        outerwear: [
            { id: 401, price: "price x", image: "https://i.imgur.com/TpdUYeb.jpeg" },
            { id: 402, price: "price x", image: "https://i.imgur.com/5OXruGv.jpeg" },
            { id: 403, price: "price x", image: "https://i.imgur.com/5YHRTm1.jpeg" },
            { id: 404, price: "price x", image: "https://i.imgur.com/eIM9uGm.jpeg" },
            { id: 405, price: "price x", image: "https://i.imgur.com/y94J0D7.jpeg" },
            { id: 406, price: "price x", image: "https://i.imgur.com/eOupaGW.jpeg" },
            { id: 407, price: "price x", image: "https://i.imgur.com/ISSXhTJ.jpeg" },
            { id: 408, price: "price x", image: "https://i.imgur.com/eB8qsYS.jpeg" },
            { id: 409, price: "price x", image: "https://i.imgur.com/DJasnAz.jpeg" },
            { id: 410, price: "price x", image: "https://i.imgur.com/sRypBmW.jpeg" },
            { id: 411, price: "price x", image: "https://i.imgur.com/L8HWIGF.jpeg" },
            { id: 412, price: "price x", image: "https://i.imgur.com/RekT4vX.jpeg" },
            { id: 413, price: "price x", image: "https://i.imgur.com/4f5PFJh.jpeg" },
            { id: 414, price: "price x", image: "https://i.imgur.com/fGuIlcB.jpeg" },
            { id: 415, price: "price x", image: "https://i.imgur.com/GTCkFfw.jpeg" },
            { id: 416, price: "price x", image: "https://i.imgur.com/UpEnzHD.jpeg" },
            { id: 417, price: "price x", image: "https://i.imgur.com/TPlVbkG.jpeg" },
            { id: 418, price: "price x", image: "https://i.imgur.com/CdcyNmx.jpeg" }
        ],
        accessories: [
            { id: 501, price: "price x", image: "https://i.imgur.com/SoUhS7c.jpeg" },
            { id: 502, price: "price x", image: "https://i.imgur.com/ymaCGCm.jpeg" },
            { id: 503, price: "price x", image: "https://i.imgur.com/FJ6j6pX.jpeg" },
            { id: 504, price: "price x", image: "https://i.imgur.com/DJ5ZLke.png" },
            { id: 505, price: "price x", image: "https://i.imgur.com/jLlwfqI.png" },
            { id: 506, price: "price x", image: "https://i.imgur.com/NPBeXs8.png" },
            { id: 507, price: "price x", image: "https://i.imgur.com/9V0TBjr.png" },
            { id: 508, price: "price x", image: "https://i.imgur.com/Zd9Wmxk.png" },
            { id: 509, price: "price x", image: "https://i.imgur.com/HiGNNQ0.png" },
            { id: 510, price: "price x", image: "https://i.imgur.com/SPqKTev.png" },
            { id: 511, price: "price x", image: "https://i.imgur.com/RPSGHRg.png" },
            { id: 512, price: "price x", image: "https://i.imgur.com/FB3YIR0.png" },
            { id: 513, price: "price x", image: "https://i.imgur.com/jZfUQFk.png" },
            { id: 514, price: "price x", image: "https://i.imgur.com/3iFygsh.png" },
            { id: 515, price: "price x", image: "https://i.imgur.com/VuhixF3.png" },
            { id: 516, price: "price x", image: "https://i.imgur.com/WPGUwLc.png" },
            { id: 517, price: "price x", image: "https://i.imgur.com/dweNIsq.png" },
            { id: 518, price: "price x", image: "https://i.imgur.com/HCx0SPw.png" },
            { id: 519, price: "price x", image: "https://i.imgur.com/U5PDIWF.png" },
            { id: 520, price: "price x", image: "https://i.imgur.com/bROFqWr.png" },
            { id: 521, price: "price x", image: "https://i.imgur.com/vYYCHqf.png" },
            { id: 522, price: "price x", image: "https://i.imgur.com/WZssJPp.png" }
        ]
    },
    men: {
        tops: [
            { id: 601, price: "price x", image: "https://i.imgur.com/r5TYeUM.png" },
            { id: 602, price: "price x", image: "https://i.imgur.com/RecnluL.png" },
            { id: 603, price: "price x", image: "https://i.imgur.com/LmBCevs.png" },
            { id: 604, price: "price x", image: "https://i.imgur.com/E9IZRPm.png" },
            { id: 605, price: "price x", image: "https://i.imgur.com/0iAMhtI.png" },
            { id: 606, price: "price x", image: "https://i.imgur.com/BZZCPet.png" },
            { id: 607, price: "price x", image: "https://i.imgur.com/RECNsj1.png" },
            { id: 608, price: "price x", image: "https://i.imgur.com/keGvX9w.png" },
            { id: 609, price: "price x", image: "https://i.imgur.com/sxk9cD1.png" },
            { id: 610, price: "price x", image: "https://i.imgur.com/bSqaXhN.png" },
            { id: 611, price: "price x", image: "https://i.imgur.com/Sd9OGeu.png" },
            { id: 612, price: "price x", image: "https://i.imgur.com/4FYWMrv.png" },
            { id: 613, price: "price x", image: "https://i.imgur.com/9yZlFwt.png" },
            { id: 614, price: "price x", image: "https://i.imgur.com/MZyTias.png" },
            { id: 615, price: "price x", image: "https://i.imgur.com/3Btz9M4.png" },
            { id: 616, price: "price x", image: "https://i.imgur.com/ypSngKl.png" }
        ],
        bottoms: [
            { id: 701, price: "price x", image: "https://i.imgur.com/geYsJYQ.png" },
            { id: 702, price: "price x", image: "https://i.imgur.com/ETJqf38.png" },
            { id: 703, price: "price x", image: "https://i.imgur.com/GlSNyO0.png" },
            { id: 704, price: "price x", image: "https://i.imgur.com/XntBSRU.png" },
            { id: 705, price: "price x", image: "https://i.imgur.com/dy01zB0.png" },
            { id: 706, price: "price x", image: "https://i.imgur.com/aMLbqHW.png" },
            { id: 707, price: "price x", image: "https://i.imgur.com/SDSu4yA.png" },
            { id: 708, price: "price x", image: "https://i.imgur.com/bvvTcES.png" },
            { id: 709, price: "price x", image: "https://i.imgur.com/Yq2AjR4.png" }
        ],
        outerwear: [
            { id: 801, price: "price x", image: "https://i.imgur.com/aPR9WIt.png" },
            { id: 802, price: "price x", image: "https://i.imgur.com/A8mHUI6.png" },
            { id: 803, price: "price x", image: "https://i.imgur.com/LDOZTO1.png" },
            { id: 804, price: "price x", image: "https://i.imgur.com/yeql2Vg.png" },
            { id: 805, price: "price x", image: "https://i.imgur.com/JCers7t.png" },
            { id: 806, price: "price x", image: "https://i.imgur.com/3kVRkW3.png" },
            { id: 807, price: "price x", image: "https://i.imgur.com/0YD6ydp.png" },
            { id: 808, price: "price x", image: "https://i.imgur.com/iFNe2cL.png" },
            { id: 809, price: "price x", image: "https://i.imgur.com/RzQP0bJ.png" }
        ]
    }
};

// --- Componente de Tarjeta de Producto ---
const ProductCard = ({ product }) => {
    const [isFlipped, setIsFlipped] = useState(false);
    const cardRef = useRef(null);

    useEffect(() => {
        const observer = new IntersectionObserver(
            ([entry]) => {
                if (entry.isIntersecting) {
                    setTimeout(() => setIsFlipped(true), 200);
                    observer.unobserve(entry.target);
                }
            },
            { threshold: 0.1 }
        );
        if (cardRef.current) observer.observe(cardRef.current);
        return () => observer.disconnect();
    }, []);

    return (
        <div ref={cardRef} className="group perspective-1000 w-full mb-20">
            <div className={`relative w-full aspect-[3/4] transition-transform duration-1000 preserve-3d ${isFlipped ? 'rotate-y-180' : ''}`}>
                {/* Lado Frontal (Logotipo Atelier) */}
                <div className="absolute inset-0 backface-hidden bg-[#F5F5DC] flex flex-col items-center justify-center border border-neutral-100">
                    <div className="w-8 h-[1px] bg-neutral-300 mb-4"></div>
                    <span className="text-[10px] uppercase tracking-[0.4em] text-neutral-400 font-light italic">Millenium Atelier</span>
                </div>
                {/* Lado Trasero (Imagen del Producto) */}
                <div className="absolute inset-0 backface-hidden rotate-y-180 bg-neutral-50 overflow-hidden">
                    <img 
                        src={product.image} 
                        alt="Producto" 
                        className="object-cover w-full h-full transform transition-transform duration-1000 group-hover:scale-105"
                        loading="lazy"
                    />
                </div>
            </div>
            {/* Información (Solo Precio, más grande) */}
            <div className={`mt-8 transition-all duration-1000 delay-300 ${isFlipped ? 'opacity-100 translate-y-0' : 'opacity-0 translate-y-4'}`}>
                <div className="flex flex-col items-center text-center">
                    <span className="text-[15px] md:text-[17px] text-neutral-900 font-medium tracking-widest lowercase opacity-90">{product.price}</span>
                </div>
            </div>
        </div>
    );
};

const SectionHeader = ({ title, subtitle, id }) => (
    <div id={id} className="pt-32 pb-20 text-center">
        <span className="text-[10px] uppercase tracking-[0.5em] text-neutral-400 mb-6 block font-bold">{subtitle}</span>
        <h2 className="text-4xl md:text-6xl font-serif text-neutral-900 italic font-light">{title}</h2>
        <div className="w-16 h-[1px] bg-neutral-900 mx-auto mt-10 opacity-10"></div>
    </div>
);

export default function App() {
    const [isMenuOpen, setIsMenuOpen] = useState(false);
    const [scrolled, setScrolled] = useState(false);

    useEffect(() => {
        const fontLink = document.createElement('link');
        fontLink.href = "https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,700;1,400&family=Inter:wght@300;400;500;600&display=swap";
        fontLink.rel = "stylesheet";
        document.head.appendChild(fontLink);

        const styleTag = document.createElement('style');
        styleTag.innerHTML = `
            body { font-family: 'Inter', sans-serif; scroll-behavior: smooth; }
            .font-serif { font-family: 'Playfair Display', serif; }
            .perspective-1000 { perspective: 1000px; }
            .preserve-3d { transform-style: preserve-3d; }
            .backface-hidden { backface-visibility: hidden; }
            .rotate-y-180 { transform: rotateY(180deg); }
        `;
        document.head.appendChild(styleTag);

        const handleScroll = () => setScrolled(window.scrollY > 50);
        window.addEventListener('scroll', handleScroll);
        return () => window.removeEventListener('scroll', handleScroll);
    }, []);

    const scrollTo = (id) => {
        const element = document.getElementById(id);
        if (element) {
            window.scrollTo({ top: element.offsetTop - 100, behavior: 'smooth' });
            setIsMenuOpen(false);
        }
    };

    return (
        <div className="bg-white min-h-screen selection:bg-neutral-900 selection:text-white">
            {/* Barra de Navegación */}
            <nav className={`fixed top-0 w-full z-50 transition-all duration-1000 ${scrolled ? 'bg-white/95 py-4 border-b border-neutral-100' : 'bg-transparent py-10'}`}>
                <div className="container mx-auto px-10 flex justify-between items-center">
                    {/* Izquierda: Menú */}
                    <div className="flex items-center space-x-6 md:w-1/3">
                        <button onClick={() => setIsMenuOpen(true)} className="flex items-center space-x-3 group">
                            <Menu size={22} strokeWidth={1} />
                            <span className="text-[10px] uppercase tracking-widest hidden md:block font-bold">Menu</span>
                        </button>
                    </div>

                    {/* Centro: Logo */}
                    <div className="md:w-1/3 flex justify-center">
                        <a href="#" className="text-3xl font-serif font-bold tracking-tighter">MILLENIUM</a>
                    </div>

                    {/* Derecha: Inicio & Buscar */}
                    <div className="flex items-center justify-end space-x-6 md:w-1/3">
                        <Search size={18} strokeWidth={1} className="hidden md:block cursor-pointer opacity-60 hover:opacity-100 transition-opacity" />
                        <a 
                            href="https://jimenhersolutions.github.io/Millenium-Clothing-co/#" 
                            className="flex items-center space-x-2 group"
                        >
                            <span className="text-[10px] uppercase tracking-widest font-bold hidden sm:block">Home</span>
                            <Home size={18} strokeWidth={1} className="group-hover:scale-110 transition-transform" />
                        </a>
                    </div>
                </div>
            </nav>

            {/* Menú Lateral */}
            <div className={`fixed inset-0 bg-white z-[100] transition-transform duration-1000 ease-in-out ${isMenuOpen ? 'translate-x-0' : '-translate-x-full'}`}>
                <div className="p-12 h-full flex flex-col">
                    <div className="flex justify-between items-center mb-24">
                        <span className="font-serif text-3xl font-bold tracking-tighter">MILLENIUM</span>
                        <button onClick={() => setIsMenuOpen(false)}><X size={32} strokeWidth={1}/></button>
                    </div>
                    <div className="space-y-4 flex-grow">
                        {['Nueva Colección', 'Mujer', 'Hombre', 'Atelier', 'Galería'].map((item) => (
                            <button key={item} className="block text-5xl md:text-7xl font-serif font-light hover:italic hover:pl-6 transition-all duration-500 text-neutral-900 text-left">
                                {item}
                            </button>
                        ))}
                    </div>
                    <div className="grid grid-cols-2 md:grid-cols-4 lg:grid-cols-8 gap-4 text-[11px] uppercase tracking-[0.4em] text-neutral-400 pt-12 border-t border-neutral-100 font-bold">
                        <button onClick={() => scrollTo('sec-tops')}>Tops</button>
                        <button onClick={() => scrollTo('sec-bottoms')}>Bottoms</button>
                        <button onClick={() => scrollTo('sec-dresses')}>Dresses</button>
                        <button onClick={() => scrollTo('sec-outerwear')}>Outerwear</button>
                        <button onClick={() => scrollTo('sec-accessories')}>Accessories</button>
                        <button onClick={() => scrollTo('sec-men-tops')}>Men Tops</button>
                        <button onClick={() => scrollTo('sec-men-bottoms')}>Men Bottoms</button>
                        <button onClick={() => scrollTo('sec-men-outerwear')}>Men Outerwear</button>
                    </div>
                </div>
            </div>

            {/* Cabecera Principal */}
            <header className="relative h-screen flex items-center justify-center overflow-hidden">
                <div className="absolute inset-0">
                    <img src="https://images.unsplash.com/photo-1539109136881-3be0616acf4b?q=80&w=2000&auto=format&fit=crop" className="w-full h-full object-cover" alt="Hero" />
                    <div className="absolute inset-0 bg-black/10"></div>
                </div>
                <div className="relative z-10 text-center text-white mix-blend-difference">
                    <span className="text-[11px] uppercase tracking-[0.8em] mb-10 block font-bold">Winter Archive 2026</span>
                    <h1 className="text-8xl md:text-[14rem] font-serif leading-[0.8] italic mb-12">Pure</h1>
                </div>
            </header>

            {/* Galería de Productos */}
            <main className="container mx-auto px-10 max-w-screen-2xl">
                
                <SectionHeader id="sec-tops" title="Tops & Blouses" subtitle="Women's Essentials" />
                <div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-x-8">
                    {productsData.women.tops.map(p => <ProductCard key={p.id} product={p} />)}
                </div>

                <SectionHeader id="sec-bottoms" title="Pants & Skirts" subtitle="Foundations" />
                <div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-x-8">
                    {productsData.women.bottoms.map(p => <ProductCard key={p.id} product={p} />)}
                </div>

                <SectionHeader id="sec-dresses" title="Dresses" subtitle="Silhouettes" />
                <div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-x-12 max-w-6xl mx-auto">
                    {productsData.women.dresses.map(p => <ProductCard key={p.id} product={p} />)}
                </div>

                <SectionHeader id="sec-outerwear" title="Women's Outerwear" subtitle="The Collection" />
                <div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-x-10 max-w-7xl mx-auto">
                    {productsData.women.outerwear.map(p => <ProductCard key={p.id} product={p} />)}
                </div>

                <SectionHeader id="sec-accessories" title="Accessories" subtitle="Final Details" />
                <div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-x-8 mb-20">
                    {productsData.women.accessories.map(p => <ProductCard key={p.id} product={p} />)}
                </div>

                <div className="w-full h-[1px] bg-neutral-100 my-40"></div>

                <SectionHeader id="sec-men-tops" title="Men's Tops" subtitle="Men's Essentials" />
                <div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-x-8">
                    {productsData.men.tops.map(p => <ProductCard key={p.id} product={p} />)}
                </div>

                <SectionHeader id="sec-men-bottoms" title="Men's Bottoms" subtitle="Men's Foundations" />
                <div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-x-10 max-w-6xl mx-auto">
                    {productsData.men.bottoms.map(p => <ProductCard key={p.id} product={p} />)}
                </div>

                <SectionHeader id="sec-men-outerwear" title="Men's Outerwear" subtitle="Men's Archive" />
                <div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-x-10 max-w-7xl mx-auto mb-40">
                    {productsData.men.outerwear.map(p => <ProductCard key={p.id} product={p} />)}
                </div>

            </main>

            {/* Pie de Página */}
            <footer className="bg-neutral-50 border-t border-neutral-100 pt-32 pb-16">
                <div className="container mx-auto px-10">
                    <div className="grid grid-cols-1 md:grid-cols-4 gap-16 mb-24">
                        <div className="col-span-2">
                            <h4 className="font-serif text-3xl italic mb-6">Millenium Atelier</h4>
                            <p className="text-neutral-400 text-sm max-w-xs font-light">.</p>
                        </div>
                        <div>
                            <h5 className="text-[10px] uppercase tracking-widest font-bold mb-8">Categories</h5>
                            <ul className="text-xs text-neutral-500 space-y-4 font-light">
                                <li><button onClick={() => scrollTo('sec-tops')}>Women's Tops</button></li>
                                <li><button onClick={() => scrollTo('sec-men-tops')}>Men's Tops</button></li>
                                <li><button onClick={() => scrollTo('sec-men-outerwear')}>Men's Outerwear</button></li>
                                <li><button onClick={() => scrollTo('sec-accessories')}>Accessories</button></li>
                            </ul>
                        </div>
                        <div className="flex space-x-8 self-end">
                            <Instagram size={18} strokeWidth={1} />
                            <Twitter size={18} strokeWidth={1} />
                            <Facebook size={18} strokeWidth={1} />
                        </div>
                    </div>
                    <div className="text-center border-t border-neutral-200 pt-10">
                        <span className="text-[9px] uppercase tracking-[0.5em] text-neutral-300 font-bold">© 2026 MILLENIUM GLOBAL</span>
                    </div>
                </div>
            </footer>
        </div>
    );
}
